<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Timer - 15 Minutes</title>
    <link rel="icon" type="image/png" href="/Site_Photos/timer.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            height: 100vh;
            overflow: hidden;
            display: flex;
            min-height: 300px;
            min-width: 300px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: background 2s ease;
        }

        body.completed {
            background: linear-gradient(135deg, #ff6b6b 0%, #dc3545 100%);
        }

        /* Background Animation */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
            animation: float 8s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
                opacity: 0.8;
            }
            50% {
                transform: translateY(-20px);
                opacity: 1;
            }
        }

        /* Clock Styles */
        .cloader {
            width: 320px;
            height: 320px;
            min-height: 320px;
            min-width: 320px;
            border: 8px solid white;
            border-radius: 50%;
            margin: 50px auto;
            position: relative;
            padding: 4rem;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }

        .clface {
            position: relative;
            
            width: 100%;
            height: 100%;
            transform: translateY(-6px);
        }

        .top {
            height: 20px;
            width: 8px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: -60px;
            margin-left: 84px;
        }

        .bottom {
            height: 20px;
            width: 8px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: 270px;
            margin-left: 84px;
        }

        .left {
            height: 8px;
            width: 20px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: -164px;
            margin-left: 224px;
        }

        .right {
            height: 8px;
            width: 20px;
            content: '';
            background-color: white;
            border-radius: 5em;
            margin-top: -8px;
            margin-left: -70px;
        }

        .clsface {
            position: absolute;
            width: 80px;
            height: 80px;
            margin-left: 48px;
            margin-top: 30px;
            border-radius: 6em;
            border: 4px solid #636363;
        }

        .hand {
            width: 65%;
            height: 8px;
            background-color: white;
            border-radius: 3em;
            border: none;
            position: absolute;
            top: 85%;
            left: -15%;
            transform-origin: 100%;
            transform: rotate(90deg);
        }

        .pin {
            width: 25%;
            height: 25%;
            border-radius: 50%;
            background: white;
            position: absolute;
            top: 86%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #sub {
            width: 10%;
            height: 10%;
            border-radius: 50%;
            background: #636363;
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        #h2 {
            width: 45%;
            left: 5%;
            top: 45%;
            background-color: #636363;
        }


    </style>
</head>
<body>
    <div class="cloader">
        <div class="clface">
            <div class="clsface">
                <div id="h2" class="hand"></div>
            </div>
            <div class="top"></div>
            <div class="bottom"></div>
            <div class="left"></div>
            <div class="right"></div>
            <div id="sub" class="pin"></div>
            <div id="h1" class="hand"></div>
            <div id="main" class="pin"></div>
        </div>
    </div>

    <script>
        // Timer functionality
        let timerInterval = null;
        let timerActive = false;
        let originalFavicon = null;
        let timeLeft = 15 * 60; // 15 minutes in seconds

        // DOM elements
        const hourHand = document.getElementById('h1');
        const minuteHand = document.getElementById('h2');
        const body = document.body;

        // Favicon management functions
        function changeFavicon(iconPath) {
            // Store original favicon if not already stored
            if (!originalFavicon) {
                const currentLink = document.querySelector('link[rel="icon"]');
                originalFavicon = currentLink ? currentLink.href : '/Site_Photos/timer.png';
            }
            
            // Create a properly sized favicon using canvas
            const img = new Image();
            img.onload = function() {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                // Set canvas size to standard favicon size
                canvas.width = 32;
                canvas.height = 32;
                
                // Clear canvas with transparent background
                ctx.clearRect(0, 0, 32, 32);
                
                // Add padding to prevent cropping - use 80% of canvas size
                const padding = 3; // 3 pixels padding on each side
                const maxSize = 32 - (padding * 2); // 26x26 max drawing area
                
                // Calculate dimensions to fit the image within the padded canvas
                const aspectRatio = img.width / img.height;
                let drawWidth, drawHeight, offsetX, offsetY;
                
                if (aspectRatio > 1) {
                    // Image is wider than tall
                    drawWidth = maxSize;
                    drawHeight = maxSize / aspectRatio;
                } else {
                    // Image is taller than wide or square
                    drawWidth = maxSize * aspectRatio;
                    drawHeight = maxSize;
                }
                
                // Center the image in the canvas
                offsetX = (32 - drawWidth) / 2;
                offsetY = (32 - drawHeight) / 2;
                
                // Draw the image centered and properly sized
                ctx.drawImage(img, offsetX, offsetY, drawWidth, drawHeight);
                
                // Convert canvas to data URL
                const faviconUrl = canvas.toDataURL('image/png');
                
                // Remove existing favicon
                const existingLinks = document.querySelectorAll('link[rel="icon"]');
                existingLinks.forEach(link => link.remove());
                
                // Add new favicon
                const link = document.createElement('link');
                link.rel = 'icon';
                link.type = 'image/png';
                link.href = faviconUrl;
                document.head.appendChild(link);
            };
            
            img.onerror = function() {
                // Fallback: use original method if image fails to load
                const existingLinks = document.querySelectorAll('link[rel="icon"]');
                existingLinks.forEach(link => link.remove());
                
                const link = document.createElement('link');
                link.rel = 'icon';
                link.type = 'image/png';
                link.href = iconPath;
                document.head.appendChild(link);
            };
            
            img.src = iconPath;
        }

        function updateClockHands() {
            const totalTime = 15 * 60; // 15 minutes in seconds
            const elapsed = totalTime - timeLeft;
            
            // Big hand (hour hand) - one full rotation over 15 minutes
            const hourProgress = elapsed / totalTime;
            const hourDegrees = 90 + (hourProgress * 360);
            hourHand.style.transform = `rotate(${hourDegrees}deg)`;
            
            // Small hand (minute hand) - one full rotation every 60 seconds
            const minuteDegrees = 90 + ((elapsed / 60) * 360);
            minuteHand.style.transform = `rotate(${minuteDegrees}deg)`;
        }

        function startTimer() {
            timerActive = true;
            
            // Change favicon to clock when timer starts
            changeFavicon('/Site_Photos/timer.png');
            
            // Ultra-smooth updates every 50ms for fluid motion
            timerInterval = setInterval(() => {
                timeLeft -= 0.05; // Decrease by 0.05 seconds (50ms)
                updateClockHands();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    
                    // Timer completed - change background to red
                    body.classList.add('completed');
                    
                    // Change favicon to green checkmark when completed
                    changeFavicon('/Site_Photos/check-mark.png');
                    
                    timerActive = false;
                }
            }, 50); // Update every 50ms for ultra-smooth motion (20 FPS)
        }

        // Auto-start timer when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Start the timer automatically
            setTimeout(() => {
                startTimer();
            }, 1000); // Small delay to ensure everything is loaded
        });
    </script>
</body>
</html>
